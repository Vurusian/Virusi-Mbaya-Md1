/*

VIRUSI-MBAYA-MD

*/

const _0x3ed991=_0x42fb;(function(_0x1a616f,_0x6cea15){const _0x27d559=_0x42fb,_0x698971=_0x1a616f();while(!![]){try{const _0x4e0bbf=parseInt(_0x27d559(0xc8))/0x1+-parseInt(_0x27d559(0xd9))/0x2+parseInt(_0x27d559(0xc9))/0x3*(-parseInt(_0x27d559(0xcc))/0x4)+parseInt(_0x27d559(0xe4))/0x5*(-parseInt(_0x27d559(0xed))/0x6)+parseInt(_0x27d559(0xee))/0x7*(parseInt(_0x27d559(0xce))/0x8)+parseInt(_0x27d559(0xd3))/0x9+-parseInt(_0x27d559(0xe3))/0xa*(parseInt(_0x27d559(0xe0))/0xb);if(_0x4e0bbf===_0x6cea15)break;else _0x698971['push'](_0x698971['shift']());}catch(_0x2aa4f1){_0x698971['push'](_0x698971['shift']());}}}(_0x5cf5,0x219f5));const axios=require(_0x3ed991(0xdc));let koyeb_api=process[_0x3ed991(0xf1)][_0x3ed991(0xe8)],axiosConfig={'headers':{'Content-Type':'application/json;charset=UTF-8','Authorization':_0x3ed991(0xec)+koyeb_api}};async function get_deployments(){const _0x4cac10=_0x3ed991;status=![];let _0xb192ec={'headers':{'Content-Type':'application/json;charset=UTF-8','Authorization':_0x4cac10(0xec)+koyeb_api}};return await axios[_0x4cac10(0xcb)](_0x4cac10(0xf0),_0xb192ec)[_0x4cac10(0xd5)](_0x1e7447=>{const _0x535e34=_0x4cac10;let _0x72df6=['STOPPED',_0x535e34(0xbf),_0x535e34(0xe7),'ERRPRING'],_0xfe9f3d=[];for(let _0x3889e2=0x0;_0x3889e2<_0x1e7447[_0x535e34(0xde)]['deployments'][_0x535e34(0xe1)];_0x3889e2++){!_0x72df6[_0x535e34(0xc0)](_0x1e7447['data'][_0x535e34(0xc7)][_0x3889e2][_0x535e34(0xda)])&&_0xfe9f3d[_0x535e34(0xc5)](_0x1e7447[_0x535e34(0xde)][_0x535e34(0xc7)][_0x3889e2][_0x535e34(0xda)]);}_0xfe9f3d[_0x535e34(0xe1)]>0x1&&(status='true');}),status;}function checkArray(_0x3b147f,_0x13bf9d){const _0x48cc1e=_0x3ed991;var _0x13525b=![];for(var _0x27cae7=0x0;_0x27cae7<_0x3b147f[_0x48cc1e(0xe1)];_0x27cae7++){if(_0x3b147f[_0x27cae7][_0x48cc1e(0xdd)]==_0x13bf9d){_0x13525b=!![];break;}}return _0x13525b;}function _0x42fb(_0x4a8b3f,_0x2c85c1){const _0x5cf5c4=_0x5cf5();return _0x42fb=function(_0x42fbf8,_0x248060){_0x42fbf8=_0x42fbf8-0xbf;let _0x3ce8fb=_0x5cf5c4[_0x42fbf8];return _0x3ce8fb;},_0x42fb(_0x4a8b3f,_0x2c85c1);}function _0x5cf5(){const _0x2f37fc=['includes','\x20._','patch','_Please\x20put\x20Koyeb\x20api\x20key\x20in\x20var\x20KOYEB_API._\x0aEg:\x20KOYEB_API:api\x20key','docker','push','split','deployments','203798kRDVNw','225723gtHjdc','_No\x20such\x20env\x20in\x20koyeb._','get','8ggPPzv','regions','4808qwKBma','ports','definition','health_checks','_update\x20started._','668322VjCXVR','value','then','https://app.koyeb.com/v1/deployments/','_Successfully\x20deleted\x20','name','100844XtbwlJ','status','join','axios','key','data','https://app.koyeb.com/v1/services/','2321vyXrKS','length','region:fra','9140bGFbSN','23045ETQdBu','latest_deployment_id','deployment','ERROR','KOYEB_API','instance_types','scalings','Successfuly\x20changed\x20var\x20_','Bearer\x20','12Ywspre','3059wIVDil','/redeploy','https://app.koyeb.com/v1/deployments','env','prod','https://app.koyeb.com/v1/services','services','routes','STOPPING'];_0x5cf5=function(){return _0x2f37fc;};return _0x5cf5();}async function delvar(_0x270aab){const _0x35fd84=_0x3ed991;var _0x180182=![];let {data:_0x573561}=await axios['get'](_0x35fd84(0xf3),axiosConfig),_0xd32ae=_0x573561[_0x35fd84(0xf4)][0x0]['id'],_0xda07f=await axios[_0x35fd84(0xcb)](_0x35fd84(0xd6)+_0x573561['services'][0x0]['latest_deployment_id'],axiosConfig),_0x2c7fac=checkArray(_0xda07f[_0x35fd84(0xde)]['deployment'][_0x35fd84(0xd0)][_0x35fd84(0xf1)],_0x270aab);if(_0x2c7fac!==!![])return _0x35fd84(0xca);let _0x5b7bfa=[];for(var _0x5d64cc=0x0;_0x5d64cc<_0xda07f['data']['deployment']['definition'][_0x35fd84(0xf1)][_0x35fd84(0xe1)];_0x5d64cc++){if(_0xda07f[_0x35fd84(0xde)][_0x35fd84(0xe6)][_0x35fd84(0xd0)]['env'][_0x5d64cc][_0x35fd84(0xdd)]===_0x270aab)continue;_0x5b7bfa[_0x35fd84(0xc5)](_0xda07f[_0x35fd84(0xde)][_0x35fd84(0xe6)][_0x35fd84(0xd0)][_0x35fd84(0xf1)][_0x5d64cc]);}let _0x9d478b={'definition':{'name':_0xda07f[_0x35fd84(0xde)][_0x35fd84(0xe6)][_0x35fd84(0xd0)][_0x35fd84(0xd8)],'routes':_0xda07f[_0x35fd84(0xde)][_0x35fd84(0xe6)][_0x35fd84(0xd0)][_0x35fd84(0xf5)],'ports':_0xda07f[_0x35fd84(0xde)][_0x35fd84(0xe6)][_0x35fd84(0xd0)][_0x35fd84(0xcf)],'env':_0x5b7bfa,'regions':_0xda07f[_0x35fd84(0xde)][_0x35fd84(0xe6)][_0x35fd84(0xd0)]['regions'],'scalings':_0xda07f['data'][_0x35fd84(0xe6)][_0x35fd84(0xd0)][_0x35fd84(0xea)],'instance_types':_0xda07f[_0x35fd84(0xde)][_0x35fd84(0xe6)][_0x35fd84(0xd0)][_0x35fd84(0xe9)],'health_checks':_0xda07f[_0x35fd84(0xde)][_0x35fd84(0xe6)][_0x35fd84(0xd0)][_0x35fd84(0xd1)],'docker':_0xda07f[_0x35fd84(0xde)][_0x35fd84(0xe6)]['definition'][_0x35fd84(0xc4)]}};return await axios['patch'](_0x35fd84(0xdf)+_0xd32ae,_0x9d478b,axiosConfig)[_0x35fd84(0xd5)](_0x436dd8=>{const _0x2e690a=_0x35fd84;_0x436dd8['status']===0xc8?_0x180182=_0x2e690a(0xd7)+_0x270aab+'\x20var\x20from\x20koyeb._':_0x180182=_0x2e690a(0xc3);}),_0x180182;}async function change_env(_0x36e36e){const _0x50e9a7=_0x3ed991;var _0x58d618='_Please\x20put\x20Koyeb\x20api\x20key\x20in\x20var\x20KOYEB_API._\x0aEg:\x20KOYEB_API:api\x20key';let {data:_0x2ae6bc}=await axios[_0x50e9a7(0xcb)](_0x50e9a7(0xf3),axiosConfig),_0x4b1410=_0x2ae6bc[_0x50e9a7(0xf4)][0x0]['id'],_0xb0cde3=await axios[_0x50e9a7(0xcb)]('https://app.koyeb.com/v1/deployments/'+_0x2ae6bc[_0x50e9a7(0xf4)][0x0][_0x50e9a7(0xe5)],axiosConfig),_0x4dddfe=_0x36e36e[_0x50e9a7(0xc6)](':'),_0x2e3db6=[];for(var _0x27a4aa=0x0;_0x27a4aa<_0xb0cde3[_0x50e9a7(0xde)][_0x50e9a7(0xe6)]['definition'][_0x50e9a7(0xf1)][_0x50e9a7(0xe1)];_0x27a4aa++){_0xb0cde3['data']['deployment']['definition'][_0x50e9a7(0xf1)][_0x27a4aa][_0x50e9a7(0xdd)]===_0x4dddfe[0x0]?_0x2e3db6[_0x50e9a7(0xc5)]({'scopes':['region:fra'],'key':''+_0x4dddfe[0x0],'value':''+_0x4dddfe[0x1]}):_0x2e3db6[_0x50e9a7(0xc5)](_0xb0cde3['data'][_0x50e9a7(0xe6)][_0x50e9a7(0xd0)]['env'][_0x27a4aa]);}let _0x3d07f1=checkArray(_0x2e3db6,_0x4dddfe[0x0]);!_0x3d07f1===!![]&&_0x2e3db6[_0x50e9a7(0xc5)]({'scopes':[_0x50e9a7(0xe2)],'key':''+_0x4dddfe[0x0],'value':''+_0x4dddfe[0x1]});let _0x288ec8={'definition':{'name':_0xb0cde3[_0x50e9a7(0xde)][_0x50e9a7(0xe6)][_0x50e9a7(0xd0)][_0x50e9a7(0xd8)],'routes':_0xb0cde3['data'][_0x50e9a7(0xe6)]['definition'][_0x50e9a7(0xf5)],'ports':_0xb0cde3[_0x50e9a7(0xde)]['deployment'][_0x50e9a7(0xd0)][_0x50e9a7(0xcf)],'env':_0x2e3db6,'regions':_0xb0cde3['data'][_0x50e9a7(0xe6)]['definition'][_0x50e9a7(0xcd)],'scalings':_0xb0cde3['data'][_0x50e9a7(0xe6)][_0x50e9a7(0xd0)][_0x50e9a7(0xea)],'instance_types':_0xb0cde3[_0x50e9a7(0xde)]['deployment']['definition'][_0x50e9a7(0xe9)],'health_checks':_0xb0cde3[_0x50e9a7(0xde)][_0x50e9a7(0xe6)][_0x50e9a7(0xd0)][_0x50e9a7(0xd1)],'docker':_0xb0cde3[_0x50e9a7(0xde)][_0x50e9a7(0xe6)][_0x50e9a7(0xd0)]['docker']}};return await axios[_0x50e9a7(0xc2)](_0x50e9a7(0xdf)+_0x4b1410,_0x288ec8,axiosConfig)['then'](_0x59455f=>{const _0x462af2=_0x50e9a7;_0x59455f[_0x462af2(0xda)]===0xc8?_0x58d618=_0x462af2(0xeb)+_0x4dddfe[0x0]+':'+_0x4dddfe[0x1]+_0x462af2(0xc1):_0x58d618=_0x462af2(0xc3);}),_0x58d618;}async function getallvar(){const _0x2f262d=_0x3ed991;let {data:_0xb9964}=await axios['get']('https://app.koyeb.com/v1/services',axiosConfig),_0x3e1e87=await axios[_0x2f262d(0xcb)](_0x2f262d(0xd6)+_0xb9964[_0x2f262d(0xf4)][0x0]['latest_deployment_id'],axiosConfig),_0x2e8c69=[];for(var _0x1b61f0=0x0;_0x1b61f0<_0x3e1e87[_0x2f262d(0xde)]['deployment'][_0x2f262d(0xd0)][_0x2f262d(0xf1)][_0x2f262d(0xe1)];_0x1b61f0++){if(!_0x3e1e87[_0x2f262d(0xde)]['deployment'][_0x2f262d(0xd0)]['env'][_0x1b61f0][_0x2f262d(0xdd)])continue;_0x2e8c69['push']('*'+_0x3e1e87[_0x2f262d(0xde)][_0x2f262d(0xe6)][_0x2f262d(0xd0)]['env'][_0x1b61f0][_0x2f262d(0xdd)]+'*\x20:\x20_'+_0x3e1e87[_0x2f262d(0xde)][_0x2f262d(0xe6)][_0x2f262d(0xd0)][_0x2f262d(0xf1)][_0x1b61f0]['value']+'_');}return _0x2e8c69[_0x2f262d(0xdb)]('\x0a');}async function getvar(_0x195806){const _0x216def=_0x3ed991;let {data:_0x2a7c88}=await axios[_0x216def(0xcb)](_0x216def(0xf3),axiosConfig),_0x2e8bb1=await axios[_0x216def(0xcb)](_0x216def(0xd6)+_0x2a7c88[_0x216def(0xf4)][0x0][_0x216def(0xe5)],axiosConfig);for(var _0x2cba7a=0x0;_0x2cba7a<_0x2e8bb1[_0x216def(0xde)][_0x216def(0xe6)]['definition'][_0x216def(0xf1)]['length'];_0x2cba7a++){if(!_0x2e8bb1[_0x216def(0xde)][_0x216def(0xe6)][_0x216def(0xd0)]['env'][_0x2cba7a]['key'])continue;if(_0x2e8bb1[_0x216def(0xde)][_0x216def(0xe6)]['definition'][_0x216def(0xf1)][_0x2cba7a]['key']===_0x195806)return _0x2e8bb1[_0x216def(0xde)][_0x216def(0xe6)][_0x216def(0xd0)][_0x216def(0xf1)][_0x2cba7a][_0x216def(0xdd)]+':'+_0x2e8bb1[_0x216def(0xde)][_0x216def(0xe6)][_0x216def(0xd0)][_0x216def(0xf1)][_0x2cba7a][_0x216def(0xd4)];}}async function redeploy(){const _0x256dd6=_0x3ed991;var _0x40e843=![],_0x207429={'deployment_group':_0x256dd6(0xf2),'sha':''};let {data:_0x5c959d}=await axios[_0x256dd6(0xcb)](_0x256dd6(0xf3),axiosConfig),_0x3b298e=_0x5c959d['services'][0x0]['id'];try{let _0x304c08=await axios['post']('https://app.koyeb.com/v1/services/'+_0x3b298e+_0x256dd6(0xef),_0x207429,axiosConfig);_0x40e843=_0x256dd6(0xd2);}catch(_0x391a63){_0x40e843='*Got\x20an\x20error\x20in\x20redeploying.*\x0a*Please\x20put\x20koyeb\x20api\x20key\x20in\x20var\x20KOYEB_API.*\x0a_Eg:\x20KOYEB_API:api\x20key\x20from\x20https://app.koyeb.com/account/api\x20._';}return _0x40e843;}module['exports']={'redeploy':redeploy,'getvar':getvar,'delvar':delvar,'getallvar':getallvar,'change_env':change_env,'get_deployments':get_deployments};

/*

VIRUSI-MBAYA-MD

*/
